"use strict";module.exports={ajax:function ajax(setting){var opts={method:(setting.method||"GET").toUpperCase(),url:setting.url||"",async:setting.async||true,dataType:setting.dataType||"json",data:setting.data||"",success:setting.success||function(){},error:setting.error||function(){}};function params_format(obj){var str="";for(var i in obj){str+=i+"="+obj[i]+"&"}return str.split("").slice(0,-1).join("")}var xhr=new XMLHttpRequest;if(opts.method=="GET"){xhr.open(opts.method,opts.url+"?"+params_format(opts.data),opts.async);xhr.send()}else{xhr.open(opts.method,opts.url,opts.async);xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(opts.data)}xhr.onreadystatechange=function(){if(xhr.readyState===4&&(xhr.status===200||xhr.status===304)){switch(opts.dataType){case"json":var json=JSON.parse(xhr.responseText);opts.success(json);break;case"xml":opts.success(xhr.responseXML);break;default:opts.success(xhr.responseText);break}}};xhr.onerror=function(err){opts.error(err)}}};